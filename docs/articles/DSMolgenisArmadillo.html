<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyse your data • DSMolgenisArmadillo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analyse your data">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DSMolgenisArmadillo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/DSMolgenisArmadillo.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/development.html">Develop DSMolgenisArmadillo</a>
    </li>
    <li>
      <a href="../articles/workspaces.html">Using workspaces</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/molgenis/molgenis-r-datashield/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Analyse your data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/molgenis/molgenis-r-datashield/blob/HEAD/vignettes/DSMolgenisArmadillo.Rmd" class="external-link"><code>vignettes/DSMolgenisArmadillo.Rmd</code></a></small>
      <div class="hidden name"><code>DSMolgenisArmadillo.Rmd</code></div>

    </div>

    
    
<p>When you start to use Armadillo as a backend for DataSHIELD you can
use the <code>DSMolgenisArmadillo</code> package for research purposes.
There is a default workflow in DataSHIELD to do analysis. These are the
steps that you need to take:</p>
<div class="section level3">
<h3 id="authenticate">Authenticate<a class="anchor" aria-label="anchor" href="#authenticate"></a>
</h3>
<p>First obtain a authentication credentials from the authentication
server to authenticate in DataSHIELD. These credentials contain an
access token along with an authentication token which is used to refresh
the session if it has timed out.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the necessary packages.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dsBaseClient</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/molgenis/molgenis-r-datashield/" class="external-link">DSMolgenisArmadillo</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># specify server url</span></span>
<span><span class="va">armadillo_url</span> <span class="op">&lt;-</span> <span class="st">"https://armadillo-demo.molgenis.net"</span></span>
<span></span>
<span><span class="co"># get token from central authentication server</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/armadillo.get_credentials.html">armadillo.get_credentials</a></span><span class="op">(</span><span class="va">armadillo_url</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "We're opening a browser so you can log in with code V6TRZV"</span></span></code></pre></div>
<p>Then build a login dataframe and perform the login on the Armadillo
server. The important part is to specify the driver. This should be
<code>ArmadilloDriver</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># build the login dataframe</span></span>
<span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"armadillo"</span>,</span>
<span>  url <span class="op">=</span> <span class="va">armadillo_url</span>,</span>
<span>  token <span class="op">=</span> <span class="va">token</span><span class="op">@</span><span class="va">access_token</span>,</span>
<span>  driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>,</span>
<span>  profile <span class="op">=</span> <span class="st">"xenon"</span>,</span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># create loginframe</span></span>
<span><span class="va">login_data</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># login to server</span></span>
<span><span class="va">conns</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">login_data</span>, assign <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="authenticate-legacy">Authenticate (legacy)<a class="anchor" aria-label="anchor" href="#authenticate-legacy"></a>
</h3>
<p>In previous versions of <code>DSMolgenisArmadillo</code> token
refreshing was not possible and tokens were requested using
<code>armadillo.get_token</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the necessary packages.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dsBaseClient</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/molgenis/molgenis-r-datashield/" class="external-link">DSMolgenisArmadillo</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># specify server url</span></span>
<span><span class="va">armadillo_url</span> <span class="op">&lt;-</span> <span class="st">"https://armadillo-demo.molgenis.net"</span></span>
<span></span>
<span><span class="co"># get token from central authentication server</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/armadillo.get_token.html">armadillo.get_token</a></span><span class="op">(</span><span class="va">armadillo_url</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "We're opening a browser so you can log in with code NFRDG5"</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build login dataframe</span></span>
<span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"armadillo"</span>,</span>
<span>  url <span class="op">=</span> <span class="va">armadillo_url</span>,</span>
<span>  token <span class="op">=</span> <span class="va">token</span>,</span>
<span>  driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>,</span>
<span>  profile <span class="op">=</span> <span class="st">"xenon"</span>,</span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">login_data</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># login to server</span></span>
<span><span class="va">conns</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">login_data</span>, assign <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>You can append multiple servers to the login frame to perform an
analysis across multiple cohorts.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="assign-data">Assign data<a class="anchor" aria-label="anchor" href="#assign-data"></a>
</h3>
<p>To work with DataSHIELD you need to be able to query data. You can do
this by assigning data in the Armadillo service.</p>
<div class="section level4">
<h4 id="assign-data-using-expressions">Assign data using expressions<a class="anchor" aria-label="anchor" href="#assign-data-using-expressions"></a>
</h4>
<p>You can assign values from expressions to symbols.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># assign some data to 'K'</span></span>
<span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.assign.expr.html" class="external-link">datashield.assign.expr</a></span><span class="op">(</span>conns <span class="op">=</span> <span class="va">conns</span>, symbol <span class="op">=</span> <span class="st">"K"</span>, <span class="st">"c(10,50,100)"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the mean of 'K' to see that the assignment has worked</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.mean.html" class="external-link">ds.mean</a></span><span class="op">(</span><span class="st">"K"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Mean.by.Study</span></span>
<span><span class="co">#&gt;           EstimatedMean Nmissing Nvalid Ntotal</span></span>
<span><span class="co">#&gt; armadillo      53.33333        0      3      3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Nstudies</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ValidityMessage</span></span>
<span><span class="co">#&gt;           ValidityMessage </span></span>
<span><span class="co">#&gt; armadillo "VALID ANALYSIS"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="assign-data-from-tables">Assign data from tables<a class="anchor" aria-label="anchor" href="#assign-data-from-tables"></a>
</h4>
<p>You can check which tables (<code>data.frame</code>’s) are available
on the Armadillo.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.tables.html" class="external-link">datashield.tables</a></span><span class="op">(</span><span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt;   [1] "examplelink5/test-sub/non_rep"               "examplelink5/test-sub/yearly_rep"           </span></span>
<span><span class="co">#&gt;   [3] "my-link/eos-demo/table"                      "examplelink11/test-sub/non_rep"             </span></span>
<span><span class="co">#&gt;   [5] "examplelink11/test-sub/yearly_rep"           "examplelink13/test-sub/non_rep"             </span></span>
<span><span class="co">#&gt;   [7] "examplelink13/test-sub/yearly_rep"           "examplelink14/test-sub/non_rep"             </span></span>
<span><span class="co">#&gt;   [9] "examplelink14/test-sub/yearly_rep"           "examplelink9/test-sub/non_rep"              </span></span>
<span><span class="co">#&gt;  [11] "examplelink9/test-sub/yearly_rep"            "nch3o1r0zn/2_1-core-1_0/trimesterrep"       </span></span>
<span><span class="co">#&gt;  [13] "nch3o1r0zn/2_1-core-1_0/nonrep"              "nch3o1r0zn/2_1-core-1_0/yearlyrep"          </span></span>
<span><span class="co">#&gt;  [15] "nch3o1r0zn/2_1-core-1_0/monthlyrep"          "nch3o1r0zn/1_1-outcome-1_0/nonrep"          </span></span>
<span><span class="co">#&gt;  [17] "nch3o1r0zn/1_1-outcome-1_0/yearlyrep"        "nch3o1r0zn/survival/veteran"                </span></span>
<span><span class="co">#&gt;  [19] "chop/2_6_core_1_3/non_rep"                   "chop/2_6_core_1_2/non_rep"                  </span></span>
<span><span class="co">#&gt;  [21] "chop/2_6_core_1_1/non_rep"                   "examplelink8/test-sub/non_rep"              </span></span>
<span><span class="co">#&gt;  [23] "examplelink8/test-sub/yearly_rep"            "new-subset-folder/data/mtcars-2"            </span></span>
<span><span class="co">#&gt;  [25] "genr/2_5-core-6_0/non_rep"                   "genr/2_5_core_6_0/non_rep"                  </span></span>
<span><span class="co">#&gt;  [27] "testsubset/core/testtable"                   "testsubset/core/yearlyrep"                  </span></span>
<span><span class="co">#&gt;  [29] "testsubset/core/nonrep"                      "test-ds-upload/test_data/mtcars"            </span></span>
<span><span class="co">#&gt;  [31] "study1/core/year_rep"                        "study1/core/non_rep"                        </span></span>
<span><span class="co">#&gt;  [33] "study1/outcome/year_rep"                     "lifecycle/core/nonrep"                      </span></span>
<span><span class="co">#&gt;  [35] "lifecycle/core/yearlyrep"                    "gecko/2_1-core-1_0/trimesterrep"            </span></span>
<span><span class="co">#&gt;  [37] "gecko/2_1-core-1_0/nonrep"                   "gecko/2_1-core-1_0/yearlyrep"               </span></span>
<span><span class="co">#&gt;  [39] "gecko/2_1-core-1_0/monthlyrep"               "gecko/1_3_outcome_ath_1_0/trimester_rep"    </span></span>
<span><span class="co">#&gt;  [41] "gecko/1_3_outcome_ath_1_0/non_rep"           "gecko/1_1-outcome-1_0/nonrep"               </span></span>
<span><span class="co">#&gt;  [43] "gecko/1_1-outcome-1_0/yearlyrep"             "gecko/test-lt/LT_example_data"              </span></span>
<span><span class="co">#&gt;  [45] "link-test/core-variables/nonrep"             "ds-workshop-24/data/selfesteem"             </span></span>
<span><span class="co">#&gt;  [47] "ds-workshop-24/data/CNSIM2"                  "ds-workshop-24/data/CNSIM3"                 </span></span>
<span><span class="co">#&gt;  [49] "ds-workshop-24/data/test_link"               "ds-workshop-24/data/CNSIM1"                 </span></span>
<span><span class="co">#&gt;  [51] "examplelink10/test-sub/non_rep"              "examplelink10/test-sub/yearly_rep"          </span></span>
<span><span class="co">#&gt;  [53] "study2/core/year_rep"                        "fix-subset/core/testtable"                  </span></span>
<span><span class="co">#&gt;  [55] "examplelink12/test-sub/non_rep"              "examplelink12/test-sub/yearly_rep"          </span></span>
<span><span class="co">#&gt;  [57] "examplelink6/test-sub/non_rep"               "examplelink6/test-sub/yearly_rep"           </span></span>
<span><span class="co">#&gt;  [59] "test/data/mtcars"                            "test/data/LT-example-dataset_long-format"   </span></span>
<span><span class="co">#&gt;  [61] "test/data/d"                                 "test/view/view-tabel"                       </span></span>
<span><span class="co">#&gt;  [63] "test/test/test"                              "armadillo-illustration/barcelona/pancreatic"</span></span>
<span><span class="co">#&gt;  [65] "armadillo-illustration/groningen/pancreatic" "trajectories/data/alspac"                   </span></span>
<span><span class="co">#&gt;  [67] "trajectories/data/chs"                       "trajectories/data/bib"                      </span></span>
<span><span class="co">#&gt;  [69] "trajectories/data/bcg"                       "trajectories/data/probit"                   </span></span>
<span><span class="co">#&gt;  [71] "ninfea/2_7_core_1_2/yearly_rep"              "ninfea/2_7_core_1_2/monthly_rep"            </span></span>
<span><span class="co">#&gt;  [73] "ninfea/2_7_core_1_2/trimester_rep"           "ninfea/2_7_core_1_2/non_rep"                </span></span>
<span><span class="co">#&gt;  [75] "ninfea/2_7_core_1_4/non_rep"                 "ninfea/2_7_core_1_1/yearly_rep"             </span></span>
<span><span class="co">#&gt;  [77] "ninfea/2_7_core_1_1/monthly_rep"             "ninfea/2_7_core_1_1/trimester_rep"          </span></span>
<span><span class="co">#&gt;  [79] "ninfea/2_7_core_1_1/non_rep"                 "ninfea/1_0_outcome_ath_1_0/trimester_rep"   </span></span>
<span><span class="co">#&gt;  [81] "ninfea/1_0_outcome_ath_1_0/non_rep"          "ninfea/2_7_core_1_3/non_rep"                </span></span>
<span><span class="co">#&gt;  [83] "ninfea/1_0_outcome_ath_1_2/non_rep"          "ninfea/2_7_core_1_5/non_rep"                </span></span>
<span><span class="co">#&gt;  [85] "ninfea/2_7_core_1_0/yearly_rep"              "ninfea/2_7_core_1_0/monthly_rep"            </span></span>
<span><span class="co">#&gt;  [87] "ninfea/2_7_core_1_0/trimester_rep"           "ninfea/2_7_core_1_0/non_rep"                </span></span>
<span><span class="co">#&gt;  [89] "ninfea/1_0_outcome_ath_1_1/non_rep"          "ninfea/1_0_outcome_ath_1_3/non_rep"         </span></span>
<span><span class="co">#&gt;  [91] "life-cycle/nonrep/nonrep"                    "testninfea/2_7_core_2_7/yearly_rep"         </span></span>
<span><span class="co">#&gt;  [93] "testninfea/2_7_core_2_7/monthly_rep"         "testninfea/2_7_core_2_7/trimester_rep"      </span></span>
<span><span class="co">#&gt;  [95] "testninfea/2_7_core_2_7/non_rep"             "examplelink4/test-sub/non_rep"              </span></span>
<span><span class="co">#&gt;  [97] "examplelink4/test-sub/yearly_rep"            "inma/1_2_urban_ath_1_0/yearly_rep"          </span></span>
<span><span class="co">#&gt;  [99] "inma/1_2_urban_ath_1_0/trimester_rep"        "inma/1_2_urban_ath_1_0/non_rep"             </span></span>
<span><span class="co">#&gt; [101] "inma/1_0_outcome_ath_2_1/trimester_rep"      "inma/1_0_outcome_ath_2_1/non_rep"           </span></span>
<span><span class="co">#&gt; [103] "inma/TEST/trimester_rep"                     "inma/1_0_outcome_ath_1_0/trimester_rep"     </span></span>
<span><span class="co">#&gt; [105] "inma/1_0_outcome_ath_1_0/non_rep"            "inma/2_6_core_1_0/monthly_rep"              </span></span>
<span><span class="co">#&gt; [107] "inma/2_6_core_1_0/non_rep"                   "inma/1_0_outcome_ath_1_2/trimester_rep"     </span></span>
<span><span class="co">#&gt; [109] "inma/1_0_outcome_ath_1_2/non_rep"            "inma/1_0_outcome_ath_1_1/trimester_rep"     </span></span>
<span><span class="co">#&gt; [111] "inma/1_0_outcome_ath_1_1/non_rep"            "inma/1_3_outcome_ath_1_1/trimester_rep"     </span></span>
<span><span class="co">#&gt; [113] "inma/1_3_outcome_ath_1_1/non_rep"            "inma/1_0_outcome_ath_1_3/trimester_rep"     </span></span>
<span><span class="co">#&gt; [115] "inma/1_0_outcome_ath_1_3/non_rep"            "inma/1_0_outcome_ath_1_5/trimester_rep"     </span></span>
<span><span class="co">#&gt; [117] "inma/1_0_outcome_ath_1_5/non_rep"            "inma/1_0_outcome_ath_1_4/trimester_rep"     </span></span>
<span><span class="co">#&gt; [119] "inma/1_0_outcome_ath_1_4/non_rep"            "inma/1_0_outcome_ath_1_6/trimester_rep"     </span></span>
<span><span class="co">#&gt; [121] "inma/1_0_outcome_ath_1_6/non_rep"            "test-delete/data/"                          </span></span>
<span><span class="co">#&gt; [123] "xenon-tests/2_1-core-1_0/nonrep"             "xenon-tests/survival/veteran"               </span></span>
<span><span class="co">#&gt; [125] "examplelink7/test-sub/non_rep"               "examplelink7/test-sub/yearly_rep"           </span></span>
<span><span class="co">#&gt; [127] "test-subset-function/data/mtcars"</span></span></code></pre></div>
<p>And load data from one of these tables.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># assign table data to a symbol</span></span>
<span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.assign.table.html" class="external-link">datashield.assign.table</a></span><span class="op">(</span></span>
<span>  conns <span class="op">=</span> <span class="va">conns</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"gecko/2_1-core-1_0/nonrep"</span>,</span>
<span>  symbol <span class="op">=</span> <span class="st">"core_nonrep"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check the columns in the non-repeated data</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"core_nonrep"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt;   [1] "row_id"              "child_id"            "mother_id"           "cohort_id"          </span></span>
<span><span class="co">#&gt;   [5] "preg_no"             "child_no"            "coh_country"         "recruit_age"        </span></span>
<span><span class="co">#&gt;   [9] "cob_m"               "ethn1_m"             "ethn2_m"             "ethn3_m"            </span></span>
<span><span class="co">#&gt;  [13] "agebirth_m_y"        "agebirth_m_d"        "death_m"             "death_m_age"        </span></span>
<span><span class="co">#&gt;  [17] "prepreg_weight"      "prepreg_weight_mes"  "prepreg_weight_ga"   "latepreg_weight"    </span></span>
<span><span class="co">#&gt;  [21] "latepreg_weight_mes" "latepreg_weight_ga"  "preg_gain"           "preg_gain_mes"      </span></span>
<span><span class="co">#&gt;  [25] "height_m"            "height_mes_m"        "prepreg_dia"         "preg_dia"           </span></span>
<span><span class="co">#&gt;  [29] "preg_thyroid"        "preg_fever"          "preeclam"            "preg_ht"            </span></span>
<span><span class="co">#&gt;  [33] "asthma_m"            "prepreg_psych"       "preg_psych"          "ppd"                </span></span>
<span><span class="co">#&gt;  [37] "prepreg_smk"         "prepreg_cig"         "preg_smk"            "preg_cig"           </span></span>
<span><span class="co">#&gt;  [41] "prepreg_alc"         "prepreg_alc_unit"    "preg_alc"            "preg_alc_unit"      </span></span>
<span><span class="co">#&gt;  [45] "folic_prepreg"       "folic_preg12"        "folic_post12"        "parity_m"           </span></span>
<span><span class="co">#&gt;  [49] "preg_plan"           "mar"                 "ivf"                 "outcome"            </span></span>
<span><span class="co">#&gt;  [53] "mode_delivery"       "plac_abrup"          "cob_p"               "cob_p_fath"         </span></span>
<span><span class="co">#&gt;  [57] "ethn1_p"             "ethn2_p"             "ethn3_p"             "ethn_p_fath"        </span></span>
<span><span class="co">#&gt;  [61] "agebirth_p_y"        "agebirth_p_d"        "agebirth_p_fath"     "death_p"            </span></span>
<span><span class="co">#&gt;  [65] "death_p_age"         "death_p_fath"        "weight_f1"           "weight_mes_f1"      </span></span>
<span><span class="co">#&gt;  [69] "weight_f1_fath"      "height_f1"           "height_mes_f1"       "height_f1_fath"     </span></span>
<span><span class="co">#&gt;  [73] "dia_bf"              "asthma_bf"           "psych_bf"            "smk_p"              </span></span>
<span><span class="co">#&gt;  [77] "smk_cig_p"           "smk_fath"            "birth_month"         "birth_year"         </span></span>
<span><span class="co">#&gt;  [81] "apgar"               "neo_unit"            "sex"                 "plurality"          </span></span>
<span><span class="co">#&gt;  [85] "ga_lmp"              "ga_us"               "ga_mr"               "ga_bj"              </span></span>
<span><span class="co">#&gt;  [89] "birth_weight"        "birth_length"        "birth_head_circum"   "weight_who_ga"      </span></span>
<span><span class="co">#&gt;  [93] "plac_weight"         "con_anomalies"       "major_con_anomalies" "cer_palsy"          </span></span>
<span><span class="co">#&gt;  [97] "sibling_pos"         "death_child"         "death_child_age"     "breastfed_excl"     </span></span>
<span><span class="co">#&gt; [101] "breastfed_any"       "breastfed_ever"      "solid_food"          "childcare_intro"    </span></span>
<span><span class="co">#&gt; [105] "cats_preg"           "dogs_preg"           "cats_quant_preg"     "dogs_quant_preg"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="assign-data-at-login-time">Assign data at login time<a class="anchor" aria-label="anchor" href="#assign-data-at-login-time"></a>
</h4>
<p>You can also specify a table in the login frame and assign the data
when you login.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># build the login dataframe</span></span>
<span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"armadillo"</span>,</span>
<span>  url <span class="op">=</span> <span class="va">armadillo_url</span>,</span>
<span>  token <span class="op">=</span> <span class="va">token</span>,</span>
<span>  driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"gecko/2_1-core-1_0/nonrep"</span>,</span>
<span>  profile <span class="op">=</span> <span class="st">"xenon"</span>,</span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># create loginframe</span></span>
<span><span class="va">login_data</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># login into server</span></span>
<span><span class="va">conns</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">login_data</span>, assign <span class="op">=</span> <span class="cn">TRUE</span>, symbol<span class="op">=</span><span class="st">"core_nonrep"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="subsetting-data">Subsetting data<a class="anchor" aria-label="anchor" href="#subsetting-data"></a>
</h3>
<p>Before you are working with the data you can subset to a specific
range of variables you want to use in the set.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># assign the repeated data to reshape</span></span>
<span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.assign.table.html" class="external-link">datashield.assign.table</a></span><span class="op">(</span></span>
<span>  conns <span class="op">=</span> <span class="va">conns</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"gecko/2_1-core-1_0/yearlyrep"</span>,</span>
<span>  symbol <span class="op">=</span> <span class="st">"core_yearlyrep"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check dimensions of repeatead measures</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dim.html" class="external-link">ds.dim</a></span><span class="op">(</span><span class="st">"core_yearlyrep"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`dimensions of core_yearlyrep in armadillo`</span></span>
<span><span class="co">#&gt; [1] 19000    34</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`dimensions of core_yearlyrep in combined studies`</span></span>
<span><span class="co">#&gt; [1] 19000    34</span></span>
<span></span>
<span><span class="co"># subset the data to the first 2 years</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dataFrameSubset.html" class="external-link">ds.dataFrameSubset</a></span><span class="op">(</span></span>
<span>  df.name <span class="op">=</span> <span class="st">"core_yearlyrep"</span>,</span>
<span>  newobj <span class="op">=</span> <span class="st">"core_yearlyrep_1_3"</span>,</span>
<span>  V1.name <span class="op">=</span> <span class="st">"core_yearlyrep$age_years"</span>,</span>
<span>  V2.name <span class="op">=</span> <span class="st">"2"</span>,</span>
<span>  Boolean.operator <span class="op">=</span> <span class="st">"&lt;="</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $is.object.created</span></span>
<span><span class="co">#&gt; [1] "A data object &lt;core_yearlyrep_1_3&gt; has been created in all specified data sources"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $validity.check</span></span>
<span><span class="co">#&gt; [1] "&lt;core_yearlyrep_1_3&gt; appears valid in all sources"</span></span>
<span></span>
<span><span class="co"># check the columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"core_yearlyrep_1_3"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt;  [1] "row_id"            "child_id"          "age_years"         "cohab_"            "occup_m_"         </span></span>
<span><span class="co">#&gt;  [6] "occupcode_m_"      "edu_m_"            "occup_f1_"         "occup_f1_fath"     "occup_f2_"        </span></span>
<span><span class="co">#&gt; [11] "occup_f2_fath"     "occupcode_f1_"     "occupcode_f1_fath" "occupcode_f2_"     "occupcode_f2_fath"</span></span>
<span><span class="co">#&gt; [16] "edu_f1_"           "edu_f1_fath"       "edu_f2_"           "edu_f2_fath"       "childcare_"       </span></span>
<span><span class="co">#&gt; [21] "childcarerel_"     "childcareprof_"    "childcarecentre_"  "smk_exp"           "pets_"            </span></span>
<span><span class="co">#&gt; [26] "cats_"             "cats_quant_"       "dogs_"             "dogs_quant_"       "mental_exp"       </span></span>
<span><span class="co">#&gt; [31] "hhincome_"         "fam_splitup"       "famsize_child"     "famsize_adult"</span></span>
<span></span>
<span><span class="co"># check dimensions again</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dim.html" class="external-link">ds.dim</a></span><span class="op">(</span><span class="st">"core_yearlyrep_1_3"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`dimensions of core_yearlyrep_1_3 in armadillo`</span></span>
<span><span class="co">#&gt; [1] 3000   34</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`dimensions of core_yearlyrep_1_3 in combined studies`</span></span>
<span><span class="co">#&gt; [1] 3000   34</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># strip the redundant columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dataFrame.html" class="external-link">ds.dataFrame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"core_yearlyrep_1_3$child_id"</span>,</span>
<span>        <span class="st">"core_yearlyrep_1_3$age_years"</span>,</span>
<span>        <span class="st">"core_yearlyrep_1_3$dogs_"</span>,</span>
<span>        <span class="st">"core_yearlyrep_1_3$cats_"</span>,</span>
<span>        <span class="st">"core_yearlyrep_1_3$pets_"</span><span class="op">)</span>,</span>
<span>  completeCases <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  newobj <span class="op">=</span> <span class="st">"core_yearlyrep_1_3_stripped"</span>,</span>
<span>  datasources <span class="op">=</span> <span class="va">conns</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $is.object.created</span></span>
<span><span class="co">#&gt; [1] "A data object &lt;core_yearlyrep_1_3_stripped&gt; has been created in all specified data sources"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $validity.check</span></span>
<span><span class="co">#&gt; [1] "&lt;core_yearlyrep_1_3_stripped&gt; appears valid in all sources"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="transform-data">Transform data<a class="anchor" aria-label="anchor" href="#transform-data"></a>
</h3>
<p>In general you need 2 methods to work with data that is stored in
long format, the <code>reshape</code> and <code>merge</code> functions
in DataSHIELD. You can reshape data with the Armadillo to transform data
from <a href="https://www.theanalysisfactor.com/wide-and-long-data/" class="external-link">wide-format
to long-format</a> and vice versa.</p>
<p>You can do this using the <code>ds.reshape</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reshape the data for the wide-format variables (yearlyrep)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.reShape.html" class="external-link">ds.reShape</a></span><span class="op">(</span></span>
<span>  data.name <span class="op">=</span> <span class="st">"core_yearlyrep_1_3_stripped"</span>,</span>
<span>  timevar.name <span class="op">=</span> <span class="st">"age_years"</span>,</span>
<span>  idvar.name <span class="op">=</span> <span class="st">"child_id"</span>,</span>
<span>  v.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pets_"</span>, <span class="st">"cats_"</span>, <span class="st">"dogs_"</span><span class="op">)</span>,</span>
<span>  direction <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  newobj <span class="op">=</span> <span class="st">"core_yearlyrep_1_3_wide"</span>,</span>
<span>  datasources <span class="op">=</span> <span class="va">conns</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $is.object.created</span></span>
<span><span class="co">#&gt; [1] "A data object &lt;core_yearlyrep_1_3_wide&gt; has been created in all specified data sources"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $validity.check</span></span>
<span><span class="co">#&gt; [1] "&lt;core_yearlyrep_1_3_wide&gt; appears valid in all sources"</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show the reshaped columns of the new data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"core_yearlyrep_1_3_wide"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt;  [1] "child_id" "pets_.0"  "cats_.0"  "dogs_.0"  "pets_.1"  "cats_.1"  "dogs_.1"  "pets_.2"  "cats_.2" </span></span>
<span><span class="co">#&gt; [10] "dogs_.2"</span></span></code></pre></div>
<p>When you reshaped and subsetted the data you often need to merge your
dataframe with others to get your analysis dataframe. You can do this
using the <code>ds.merge</code> function:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># merge non-repeated table with wide-format repeated table</span></span>
<span><span class="co"># make sure the disclosure measure regarding stringshort is set to '100'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.merge.html" class="external-link">ds.merge</a></span><span class="op">(</span></span>
<span>  x.name <span class="op">=</span> <span class="st">"core_nonrep"</span>,</span>
<span>  y.name <span class="op">=</span> <span class="st">"core_yearlyrep_1_3_wide"</span>,</span>
<span>  by.x.names <span class="op">=</span> <span class="st">"child_id"</span>,</span>
<span>  by.y.names <span class="op">=</span> <span class="st">"child_id"</span>,</span>
<span>  newobj <span class="op">=</span> <span class="st">"analysis_df"</span>,</span>
<span>  datasources <span class="op">=</span> <span class="va">conns</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; $is.object.created</span></span>
<span><span class="co">#&gt; [1] "A data object &lt;analysis_df&gt; has been created in all specified data sources"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $validity.check</span></span>
<span><span class="co">#&gt; [1] "&lt;analysis_df&gt; appears valid in all sources"</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"analysis_df"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt;   [1] "child_id"            "row_id"              "mother_id"           "cohort_id"          </span></span>
<span><span class="co">#&gt;   [5] "preg_no"             "child_no"            "coh_country"         "recruit_age"        </span></span>
<span><span class="co">#&gt;   [9] "cob_m"               "ethn1_m"             "ethn2_m"             "ethn3_m"            </span></span>
<span><span class="co">#&gt;  [13] "agebirth_m_y"        "agebirth_m_d"        "death_m"             "death_m_age"        </span></span>
<span><span class="co">#&gt;  [17] "prepreg_weight"      "prepreg_weight_mes"  "prepreg_weight_ga"   "latepreg_weight"    </span></span>
<span><span class="co">#&gt;  [21] "latepreg_weight_mes" "latepreg_weight_ga"  "preg_gain"           "preg_gain_mes"      </span></span>
<span><span class="co">#&gt;  [25] "height_m"            "height_mes_m"        "prepreg_dia"         "preg_dia"           </span></span>
<span><span class="co">#&gt;  [29] "preg_thyroid"        "preg_fever"          "preeclam"            "preg_ht"            </span></span>
<span><span class="co">#&gt;  [33] "asthma_m"            "prepreg_psych"       "preg_psych"          "ppd"                </span></span>
<span><span class="co">#&gt;  [37] "prepreg_smk"         "prepreg_cig"         "preg_smk"            "preg_cig"           </span></span>
<span><span class="co">#&gt;  [41] "prepreg_alc"         "prepreg_alc_unit"    "preg_alc"            "preg_alc_unit"      </span></span>
<span><span class="co">#&gt;  [45] "folic_prepreg"       "folic_preg12"        "folic_post12"        "parity_m"           </span></span>
<span><span class="co">#&gt;  [49] "preg_plan"           "mar"                 "ivf"                 "outcome"            </span></span>
<span><span class="co">#&gt;  [53] "mode_delivery"       "plac_abrup"          "cob_p"               "cob_p_fath"         </span></span>
<span><span class="co">#&gt;  [57] "ethn1_p"             "ethn2_p"             "ethn3_p"             "ethn_p_fath"        </span></span>
<span><span class="co">#&gt;  [61] "agebirth_p_y"        "agebirth_p_d"        "agebirth_p_fath"     "death_p"            </span></span>
<span><span class="co">#&gt;  [65] "death_p_age"         "death_p_fath"        "weight_f1"           "weight_mes_f1"      </span></span>
<span><span class="co">#&gt;  [69] "weight_f1_fath"      "height_f1"           "height_mes_f1"       "height_f1_fath"     </span></span>
<span><span class="co">#&gt;  [73] "dia_bf"              "asthma_bf"           "psych_bf"            "smk_p"              </span></span>
<span><span class="co">#&gt;  [77] "smk_cig_p"           "smk_fath"            "birth_month"         "birth_year"         </span></span>
<span><span class="co">#&gt;  [81] "apgar"               "neo_unit"            "sex"                 "plurality"          </span></span>
<span><span class="co">#&gt;  [85] "ga_lmp"              "ga_us"               "ga_mr"               "ga_bj"              </span></span>
<span><span class="co">#&gt;  [89] "birth_weight"        "birth_length"        "birth_head_circum"   "weight_who_ga"      </span></span>
<span><span class="co">#&gt;  [93] "plac_weight"         "con_anomalies"       "major_con_anomalies" "cer_palsy"          </span></span>
<span><span class="co">#&gt;  [97] "sibling_pos"         "death_child"         "death_child_age"     "breastfed_excl"     </span></span>
<span><span class="co">#&gt; [101] "breastfed_any"       "breastfed_ever"      "solid_food"          "childcare_intro"    </span></span>
<span><span class="co">#&gt; [105] "cats_preg"           "dogs_preg"           "cats_quant_preg"     "dogs_quant_preg"    </span></span>
<span><span class="co">#&gt; [109] "pets_.0"             "cats_.0"             "dogs_.0"             "pets_.1"            </span></span>
<span><span class="co">#&gt; [113] "cats_.1"             "dogs_.1"             "pets_.2"             "cats_.2"            </span></span>
<span><span class="co">#&gt; [117] "dogs_.2"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-your-work">Save your work<a class="anchor" aria-label="anchor" href="#save-your-work"></a>
</h3>
<p>When you finished building your analysis frame you can save it using
<a href="workspaces.html">workspaces</a>.</p>
</div>
<div class="section level3">
<h3 id="performing-analysis">Performing analysis<a class="anchor" aria-label="anchor" href="#performing-analysis"></a>
</h3>
<p>There are a variety of analysis you can perform in DataSHIELD. You
can perform basic methods such as summary statistics and more advanced
methods such as GLM.</p>
<div class="section level4">
<h4 id="simple-statistical-methods">Simple statistical methods<a class="anchor" aria-label="anchor" href="#simple-statistical-methods"></a>
</h4>
<p>You execute a summary on the a variable within you analysis frame. It
will return summary statistics.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.summary.html" class="external-link">ds.summary</a></span><span class="op">(</span><span class="st">"analysis_df$pets_.1"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span>
<span><span class="co">#&gt; $armadillo</span></span>
<span><span class="co">#&gt; $armadillo$class</span></span>
<span><span class="co">#&gt; [1] "numeric"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $armadillo$length</span></span>
<span><span class="co">#&gt; [1] 1000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $armadillo$`quantiles &amp; mean`</span></span>
<span><span class="co">#&gt;      5%     10%     25%     50%     75%     90%     95%    Mean </span></span>
<span><span class="co">#&gt;   8.000  15.000  32.750  61.000  90.000 108.000 113.000  60.954</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="advanced-statistical-methods">Advanced statistical methods<a class="anchor" aria-label="anchor" href="#advanced-statistical-methods"></a>
</h4>
<p>When you finished the analysis dataframe, you can perform the actual
analysis. You can use a wide variety of functions. The example below is
showing the <code>glm</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.assign.table.html" class="external-link">datashield.assign.table</a></span><span class="op">(</span></span>
<span>  conns <span class="op">=</span> <span class="va">conns</span>,</span>
<span>  table <span class="op">=</span> <span class="st">"gecko/1_1-outcome-1_0/nonrep"</span>,</span>
<span>  symbol <span class="op">=</span> <span class="st">"outcome_nonrep"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">armadillo_glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.glm.html" class="external-link">ds.glm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="st">"asthma_ever_CHICOS~pets_preg"</span>,</span>
<span>  data <span class="op">=</span> <span class="st">"outcome_nonrep"</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"binomial"</span>,</span>
<span>  datasources <span class="op">=</span> <span class="va">conns</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Do the meta analysis and install prerequisites.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://www.metafor-project.org" class="external-link">'metafor'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'metafor'</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">armadillo_glm</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"pets_preg"</span>, <span class="st">"Estimate"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">sei</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">armadillo_glm</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="st">"pets_preg"</span>, <span class="st">"Std. Error"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">metafor</span><span class="fu">::</span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">rma</a></span><span class="op">(</span><span class="va">yi</span>, sei <span class="op">=</span> <span class="va">sei</span><span class="op">)</span></span>
<span><span class="va">res</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Random-Effects Model (k = 1; tau^2 estimator: REML)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; tau^2 (estimated amount of total heterogeneity): 0</span></span>
<span><span class="co">#&gt; tau (square root of estimated tau^2 value):      0</span></span>
<span><span class="co">#&gt; I^2 (total heterogeneity / total variability):   0.00%</span></span>
<span><span class="co">#&gt; H^2 (total variability / sampling variability):  1.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Test for Heterogeneity:</span></span>
<span><span class="co">#&gt; Q(df = 0) = 0.0000, p-val = 1.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Results:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; estimate      se     zval    pval    ci.lb   ci.ub    </span></span>
<span><span class="co">#&gt;  -0.1310  0.1267  -1.0343  0.3010  -0.3793  0.1173    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="fu">metafor</span><span class="fu">::</span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/forest.html" class="external-link">forest</a></span><span class="op">(</span><span class="va">res</span>, xlab <span class="op">=</span> <span class="st">"OR"</span>, transf <span class="op">=</span> <span class="va">exp</span>, refline <span class="op">=</span> <span class="fl">1</span>, slab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"armadillo_glm"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="DSMolgenisArmadillo-meta-analysis-1.png" alt="plot of chunk meta-analysis" width="100%"><p class="caption">
plot of chunk meta-analysis
</p>
</div>
</div>
<div class="section level4">
<h4 id="creating-figures">Creating figures<a class="anchor" aria-label="anchor" href="#creating-figures"></a>
</h4>
<p>You can directly create figures with the DataSHIELD methods. For
example:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create histogram</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.histogram.html" class="external-link">ds.histogram</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"core_nonrep$coh_country"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="DSMolgenisArmadillo-create-a-histogram-1.png" alt="plot of chunk create-a-histogram" width="100%"><p class="caption">
plot of chunk create-a-histogram
</p>
</div>
<pre><code><span><span class="co">#&gt; $breaks</span></span>
<span><span class="co">#&gt;  [1]  35.31138 116.38319 197.45500 278.52680 359.59861 440.67042 521.74222 602.81403 683.88584 764.95764</span></span>
<span><span class="co">#&gt; [11] 846.02945</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $counts</span></span>
<span><span class="co">#&gt;  [1] 106 101  92 103 106 104 105 101 113  69</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $density</span></span>
<span><span class="co">#&gt;  [1] 0.0013074829 0.0012458092 0.0011347965 0.0012704787 0.0013074829 0.0012828134 0.0012951481</span></span>
<span><span class="co">#&gt;  [8] 0.0012458092 0.0013938261 0.0008510974</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mids</span></span>
<span><span class="co">#&gt;  [1]  75.84729 156.91909 237.99090 319.06271 400.13451 481.20632 562.27813 643.34993 724.42174 805.49355</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $xname</span></span>
<span><span class="co">#&gt; [1] "xvect"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $equidist</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "histogram"</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a heatmap</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.heatmapPlot.html" class="external-link">ds.heatmapPlot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"analysis_df$pets_.1"</span>, y <span class="op">=</span> <span class="st">"analysis_df$dogs_.1"</span>, datasources <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="DSMolgenisArmadillo-create-a-heatmap-1.png" alt="plot of chunk create-a-heatmap" width="100%"><p class="caption">
plot of chunk create-a-heatmap
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># logout</span></span>
<span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.logout.html" class="external-link">datashield.logout</a></span><span class="op">(</span><span class="va">conns</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mariska Slofstra, Sido Haakma, Tommy de Boer, Fleur Kelpin, MOLGENIS org.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
